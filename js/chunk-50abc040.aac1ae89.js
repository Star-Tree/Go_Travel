(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50abc040"],{"32d5":function(e,t,a){"use strict";var c=a("7a23"),l=a("5b12"),n=a.n(l),s=a("a1e9"),i=a("5c40"),r=a("6605"),b=a("5502");const u=e=>(Object(c["A"])("data-v-48a866b3"),e=e(),Object(c["y"])(),e),o={class:"searchBar"},d={class:"searchBar_pageTipsMobile"},O=u(()=>Object(c["g"])("h3",null,"你目前正在搜尋",-1)),j={action:"#",method:"post",class:"searchBar_main"},v=u(()=>Object(c["g"])("option",{value:""},"不分縣市",-1)),g=["value"],h=u(()=>Object(c["g"])("img",{src:n.a,alt:"搜尋圖示",loadin:"lazy"},null,-1)),m=u(()=>Object(c["g"])("span",null,"搜尋",-1)),y=[h,m];var p={__name:"SearchBar",setup(e){const t=Object(r["c"])(),a=Object(b["b"])(),l=Object(s["n"])(""),n=Object(s["n"])(""),u=Object(s["n"])(""),h=Object(i["e"])(()=>a.getters[t.name+"/allCityArr"]),m=Object(i["e"])(()=>a.getters[t.name+"/oneCity"]),p=Object(i["e"])(()=>a.getters[t.name+"/searchText"]);switch(t.name){case"Landscape":u.value="景點";break;case"Foods":u.value="美食";break;case"Activity":u.value="活動";break;case"Hotel":u.value="住宿";break;default:console.log("HomePage or not match")}const f=()=>{let e={};e.searchText=n.value,e.oneCity=l.value,a.dispatch(t.name+"/handShowSearchResultArrInit",e),a.dispatch(t.name+"/handChangeSelectRelevantOrNearby","relevant"),"Landscape"===t.name?a.dispatch(t.name+"/handCheckboxTicketInit",!1):"Activity"===t.name&&a.dispatch("Activity/handDateTimeInit",""),a.dispatch(t.name+"/handCategoryInit",""),a.dispatch(t.name+"/handResetFilterInit")};Object(i["V"])(n,e=>{a.dispatch(t.name+"/handSearchTextInit",e)}),Object(i["V"])(l,e=>{a.dispatch(t.name+"/handOneCityInit",e)});const I=()=>{a.dispatch(t.name+"/handAllCityArrInit"),n.value=p.value,l.value=m.value};return Object(i["C"])(()=>{I()}),(e,t)=>(Object(c["x"])(),Object(c["f"])("div",o,[Object(c["g"])("span",d,Object(c["H"])(Object(c["I"])(u))+"頁 / 搜尋結果",1),O,Object(c["g"])("form",j,[Object(c["P"])(Object(c["g"])("input",{type:"search",name:"searchCity",placeholder:"請輸入關鍵字",class:"searchKeyword","onUpdate:modelValue":t[0]||(t[0]=e=>Object(c["q"])(n)?n.value=e:null)},null,512),[[c["L"],Object(c["I"])(n),void 0,{trim:!0}]]),Object(c["P"])(Object(c["g"])("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>Object(c["q"])(l)?l.value=e:null),class:"selectCity"},[v,(Object(c["x"])(!0),Object(c["f"])(c["a"],null,Object(c["D"])(Object(c["I"])(h),e=>(Object(c["x"])(),Object(c["f"])("option",{key:e.chName,value:e.enName},Object(c["H"])(e.chName),9,g))),128))],512),[[c["K"],Object(c["I"])(l)]]),Object(c["g"])("button",{onClick:t[2]||(t[2]=Object(c["Q"])(e=>f(),["prevent"]))},y)])]))}},f=(a("8472"),a("6b0d")),I=a.n(f);const w=I()(p,[["__scopeId","data-v-48a866b3"]]);t["a"]=w},"5b12":function(e,t,a){e.exports=a.p+"img/search.2661be54.svg"},"707e":function(e,t,a){},"7f31":function(e,t,a){e.exports=a.p+"img/noResult.02d4a145.svg"},"844c":function(e,t,a){e.exports=a.p+"img/scrollFilterArrow.32473892.svg"},8472:function(e,t,a){"use strict";a("b458")},"9d86":function(e,t,a){"use strict";a("707e")},b458:function(e,t,a){},e590:function(e,t,a){"use strict";var c=a("7a23"),l=a("844c"),n=a.n(l),s=a("f83c"),i=a.n(s),r=a("7f31"),b=a.n(r),u=a("5c40"),o=a("a1e9"),d=a("6605"),O=a("5502");const j=e=>(Object(c["A"])("data-v-9336222a"),e=e(),Object(c["y"])(),e),v={class:"searchResults"},g={class:"searchResults_filter"},h={class:"searchResults_filter_header"},m={class:"filterBlockMobile"},y=j(()=>Object(c["g"])("option",{value:"relevant"},"顯示搜尋結果",-1)),p={value:"nearby"},f=j(()=>Object(c["g"])("img",{src:n.a,alt:"行動版篩選器關閉按鈕",loadin:"lazy"},null,-1)),I=j(()=>Object(c["g"])("span",null,"縮小搜尋範圍",-1)),w=[f,I],N={class:"order"},C=j(()=>Object(c["g"])("h6",null,"顯示方式",-1)),A=j(()=>Object(c["g"])("option",{value:"relevant"},"顯示搜尋結果",-1)),k={value:"nearby"},R={class:"service"},S=j(()=>Object(c["g"])("h6",null,"服務資訊",-1)),V={class:"schedule"},L=j(()=>Object(c["g"])("h6",null,"指定日期",-1)),T=j(()=>Object(c["g"])("h6",null,"主題類別",-1)),x=["data-category","value"],P=["data-category","value"],_=["data-category","value"],H=["data-category","value"],D={class:"searchResults_show"},F=["src","alt"],M={class:"mapAddress"},U=j(()=>Object(c["g"])("img",{src:i.a,alt:"地圖標記圖示",class:"mapPin",loadin:"lazy"},null,-1)),q={class:"noResult",src:b.a,alt:"搜尋不到",loadin:"lazy"};var z={__name:"SearchResults",setup(e){const t=Object(d["c"])(),a=Object(O["b"])(),l=Object(u["e"])(()=>a.getters[t.name+"/oneCity"]),n=Object(u["e"])(()=>a.getters[t.name+"/searchText"]),s=Object(u["e"])(()=>a.getters[t.name+"/selectRelevantOrNearby"]),i=Object(u["e"])(()=>a.getters["Landscape/checkboxTicket"]),r=Object(u["e"])(()=>a.getters["Activity/dateTime"]),b=Object(u["e"])(()=>a.getters[t.name+"/category"]),j=Object(u["e"])(()=>a.getters[t.name+"/resetFilter"]),f=Object(u["e"])(()=>a.getters[t.name+"/showSearchResultArr"]),I=Object(o["n"])(null),z=Object(o["n"])(null),B=Object(o["n"])(null),K=Object(o["n"])(null),E=Object(o["n"])("relevant"),J=Object(o["n"])(!1),$=Object(o["n"])(""),Q=Object(o["n"])(!1),G=Object(o["n"])(!1),W=Object(o["n"])(!1),X=Object(o["m"])({searchText:n.value,oneCity:l.value}),Y=Object(o["m"])({latitude:0,longitude:0}),Z=Object(o["m"])({searchResultArr:[],category:""}),ee=Object(o["m"])({viewsName:"",dynamicId:"",searchResultsTitleName:"",buttonNameOfCategory:[],buttonValueOfCategory:[]});switch(t.name){case"Landscape":ee.viewsName="景點",ee.dynamicId="ScenicSpotID",ee.searchResultsTitleName="ScenicSpotName",ee.buttonNameOfCategory=["自然風景類","遊憩類","文化類","藝術類"],ee.buttonValueOfCategory=["自然風景","遊憩玩樂","文化古蹟","藝文空間"];break;case"Foods":ee.viewsName="美食",ee.dynamicId="RestaurantID",ee.searchResultsTitleName="RestaurantName",ee.buttonNameOfCategory=["中式美食","異國料理","甜點冰品","伴手禮"],ee.buttonValueOfCategory=["中式美食","異國料理","甜點冰品","特色伴手禮"];break;case"Activity":ee.viewsName="活動",ee.dynamicId="ActivityID",ee.searchResultsTitleName="ActivityName",ee.buttonNameOfCategory=["年度活動","節慶活動","藝文活動","親近山海"],ee.buttonValueOfCategory=["年度活動","節慶活動","藝文活動","親近山海"];break;case"Hotel":ee.viewsName="住宿",ee.dynamicId="HotelID",ee.searchResultsTitleName="HotelName",ee.buttonNameOfCategory=["一般旅館","一般觀光旅館","國際觀光旅館","民宿"],ee.buttonValueOfCategory=["一般旅館","觀光旅館","國際旅館","民宿"];break;default:console.log("HomePage or not match")}const te=()=>G.value=!G.value,ae=()=>{K.value.childNodes.forEach(e=>e.classList.remove("active"))},ce=()=>new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(t=>{Y.latitude=t.coords.latitude,Y.longitude=t.coords.longitude,e()},e=>{console.log(e),t("It's not catch current position")},{enableHighAccuracy:!0})});async function le(e){try{"nearby"===e?(await a.dispatch(t.name+"/handChangeSelectRelevantOrNearby","nearby"),await a.dispatch(t.name+"/handNearbyOfSearchResultArrInit",Y)):"relevant"===e&&(await a.dispatch(t.name+"/handChangeSelectRelevantOrNearby","relevant"),await a.dispatch(t.name+"/handShowSearchResultArrInit",X))}catch(c){console.log(c)}}async function ne(e){try{e?(await a.dispatch(t.name+"/handCheckTicketInfo"),I.value.disabled=!0):e||"relevant"!==E.value?e||"nearby"!==E.value||(await a.dispatch(t.name+"/handNearbyOfSearchResultArrInit",Y),I.value.disabled=!1):(await a.dispatch(t.name+"/handShowSearchResultArrInit",X),I.value.disabled=!1),await a.dispatch(t.name+"/handCheckboxTicketInit",e)}catch(c){console.log(c)}}async function se(e){try{let c=+new Date(""+e);isNaN(c)||"relevant"!==E.value?isNaN(c)||"nearby"!==E.value?isNaN(c)&&"relevant"===E.value?(await a.dispatch(t.name+"/handShowSearchResultArrInit",X),I.value.disabled=!1):isNaN(c)&&"nearby"===E.value&&(await a.dispatch(t.name+"/handNearbyOfSearchResultArrInit",Y),I.value.disabled=!1):(await a.dispatch(t.name+"/handNearbyOfSearchResultArrInit",Y),await a.dispatch(t.name+"/handSelectDate",c),I.value.disabled=!0):(await a.dispatch(t.name+"/handShowSearchResultArrInit",X),await a.dispatch(t.name+"/handSelectDate",c),I.value.disabled=!0),await a.dispatch(t.name+"/handDateTimeInit",e)}catch(c){console.log(c)}}const ie=async e=>{try{if("recover"===e)ae(),K.value.childNodes.forEach(e=>{e.dataset.category===Z.category&&e.classList.add("active")}),await le(E.value),"Landscape"===t.name?await ne(J.value):"Activity"===t.name&&$.value&&await se($.value),""!==Z.category&&(await a.dispatch(t.name+"/handCategoryOfSearchResultArrInit",Z),I.value.disabled=!0,"Landscape"===t.name?z.value.disabled=!0:"Activity"===t.name&&(B.value.disabled=!0));else{if("INPUT"!==e.target.nodeName)return;"active"===e.target.classList.value?(await le(E.value),"Landscape"===t.name?await ne(J.value):"Activity"===t.name&&$.value&&await se($.value),e.target.classList.remove("active"),Z.category="","Landscape"===t.name&&!1!==J.value||"Activity"===t.name&&""!==$.value?I.value.disabled=!0:I.value.disabled=!1,"Landscape"===t.name?z.value.disabled=!1:"Activity"===t.name&&(B.value.disabled=!1)):"active"!==e.target.classList.value&&(ae(),e.target.classList.add("active"),Z.category=e.target.dataset.category,await le(E.value),"Landscape"===t.name?await ne(J.value):"Activity"===t.name&&$.value&&await se($.value),await a.dispatch(t.name+"/handCategoryOfSearchResultArrInit",Z),I.value.disabled=!0,"Landscape"===t.name?z.value.disabled=!0:"Activity"===t.name&&(B.value.disabled=!0))}await a.dispatch(t.name+"/handCategoryInit",Z.category)}catch(c){console.log(c)}};Object(u["V"])(()=>t.name,e=>{W.value=!0}),Object(u["V"])(E,e=>{!W.value&&le(e)}),Object(u["V"])(J,e=>{ne(e)}),Object(u["V"])($,e=>{se(e)}),Object(u["V"])(s,e=>{E.value=e}),Object(u["V"])(l,e=>{X.oneCity=e}),Object(u["V"])(n,e=>{X.searchText=e}),Object(u["V"])(i,e=>{J.value=e}),Object(u["V"])(r,e=>{$.value=e}),Object(u["V"])(b,e=>{Z.category=e}),Object(u["V"])(f,e=>{if(!e)return 0;0===e.length?Q.value=!0:Q.value=!1,Z.searchResultArr=e}),Object(u["V"])(j,e=>{ae(),I.value.disabled=!1,"Landscape"===t.name?z.value.disabled=!1:"Activity"===t.name&&(B.value.disabled=!1)});const re=async()=>{try{await ce(),0!==f.value.length&&(E.value=s.value,"Landscape"===t.name?J.value=i.value:"Activity"===t.name&&($.value=r.value),Z.category=b.value,ie("recover"))}catch(e){console.log(e)}};return Object(u["C"])(()=>{re()}),(e,a)=>{const l=Object(c["E"])("router-link");return Object(c["x"])(),Object(c["f"])("div",v,[Object(c["g"])("div",g,[Object(c["g"])("div",h,[Object(c["g"])("p",null,[Object(c["i"])("共有"),Object(c["g"])("span",null,Object(c["H"])(Object(c["I"])(f).length),1),Object(c["i"])("筆搜尋結果")]),Object(c["g"])("div",m,[Object(c["P"])(Object(c["g"])("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>Object(c["q"])(E)?E.value=e:null),ref_key:"elSelect",ref:I,class:"orderMobile"},[y,Object(c["g"])("option",p,"顯示附近"+Object(c["H"])(Object(c["I"])(ee).viewsName),1)],512),[[c["K"],Object(c["I"])(E)]]),Object(c["g"])("div",{class:"scrollFilterMenu",onClick:te},"縮小搜尋範圍")])]),Object(c["g"])("div",{class:Object(c["s"])(["scrollFilterUnderbase",{open:Object(c["I"])(G)}])},null,2),Object(c["g"])("div",{class:Object(c["s"])(["scrollFilter",{open:Object(c["I"])(G)}])},[Object(c["g"])("div",{class:"scrollFilterMenu-close",onClick:te},w)],2),Object(c["g"])("form",{action:"#",method:"post",class:Object(c["s"])({open:Object(c["I"])(G)})},[Object(c["g"])("div",N,[C,Object(c["P"])(Object(c["g"])("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>Object(c["q"])(E)?E.value=e:null),ref_key:"elSelect",ref:I},[A,Object(c["g"])("option",k,"顯示附近"+Object(c["H"])(Object(c["I"])(ee).viewsName),1)],512),[[c["K"],Object(c["I"])(E)]])]),Object(c["P"])(Object(c["g"])("div",R,[S,Object(c["g"])("ul",null,[Object(c["g"])("li",null,[Object(c["g"])("label",{for:"ticket",class:Object(c["s"])({checked:Object(c["I"])(J)})}," 購票資訊 ",2),Object(c["P"])(Object(c["g"])("input",{type:"checkbox",name:"service",id:"ticket",ref_key:"elCheckbox",ref:z,value:"TicketInfo","onUpdate:modelValue":a[2]||(a[2]=e=>Object(c["q"])(J)?J.value=e:null)},null,512),[[c["J"],Object(c["I"])(J)]])])])],512),[[c["M"],"Landscape"===Object(c["I"])(t).name]]),Object(c["P"])(Object(c["g"])("div",V,[L,Object(c["P"])(Object(c["g"])("input",{type:"date",class:Object(c["s"])({selected:Object(c["I"])($)}),ref_key:"elInputDate",ref:B,"onUpdate:modelValue":a[3]||(a[3]=e=>Object(c["q"])($)?$.value=e:null)},null,2),[[c["L"],Object(c["I"])($)]])],512),[[c["M"],"Activity"===Object(c["I"])(t).name]]),Object(c["g"])("div",{class:"category",ref_key:"elCategory",ref:K,onClick:a[4]||(a[4]=e=>ie(e))},[T,Object(c["g"])("input",{type:"button","data-category":Object(c["I"])(ee).buttonNameOfCategory[0],value:Object(c["I"])(ee).buttonValueOfCategory[0]},null,8,x),Object(c["g"])("input",{type:"button","data-category":Object(c["I"])(ee).buttonNameOfCategory[1],value:Object(c["I"])(ee).buttonValueOfCategory[1]},null,8,P),Object(c["g"])("input",{type:"button","data-category":Object(c["I"])(ee).buttonNameOfCategory[2],value:Object(c["I"])(ee).buttonValueOfCategory[2]},null,8,_),Object(c["g"])("input",{type:"button","data-category":Object(c["I"])(ee).buttonNameOfCategory[3],value:Object(c["I"])(ee).buttonValueOfCategory[3]},null,8,H)],512)],2)]),Object(c["P"])(Object(c["g"])("ul",D,[(Object(c["x"])(!0),Object(c["f"])(c["a"],null,Object(c["D"])(Object(c["I"])(f),e=>(Object(c["x"])(),Object(c["f"])("li",{key:e.id},[Object(c["j"])(l,{to:`${Object(c["I"])(t).path}/${e[Object(c["I"])(ee).dynamicId]}`},{default:Object(c["O"])(()=>[Object(c["g"])("img",{src:e.Picture.PictureUrl1,alt:e.Picture.PictureDescription1,loadin:"lazy"},null,8,F),Object(c["g"])("h4",null,Object(c["H"])(e[Object(c["I"])(ee).searchResultsTitleName]),1),Object(c["g"])("div",M,[U,Object(c["g"])("span",null,Object(c["H"])(e.Address),1)])]),_:2},1032,["to"])]))),128))],512),[[c["M"],!Object(c["I"])(Q)]]),Object(c["P"])(Object(c["g"])("img",q,null,512),[[c["M"],Object(c["I"])(Q)]])])}}},B=(a("9d86"),a("6b0d")),K=a.n(B);const E=K()(z,[["__scopeId","data-v-9336222a"]]);t["a"]=E},f83c:function(e,t,a){e.exports=a.p+"img/mapPin.7247c272.svg"}}]);
//# sourceMappingURL=chunk-50abc040.aac1ae89.js.map